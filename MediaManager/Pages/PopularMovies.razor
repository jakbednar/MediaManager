@using MediaManager.Services
@using MediaManager.Models
@page "/popular"
@inject TmdbService TmdbService

<h3>ðŸŽ¬ Popular Movies</h3>

@if (movies == null)
{
    <p>Loading...</p>
}
else
{
    <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
        @foreach (var movie in movies)
        {
            <div style="width: 200px;">
                <img src="https://image.tmdb.org/t/p/w200@movie.poster_path" alt="@movie.title" />
                <h5>@movie.title</h5>
                <p>@movie.release_date</p>
            </div>
        }
    </div>
}

@code {
    private List<TmdbMovie>? movies;

    protected override async Task OnInitializedAsync()
    {
        movies = await TmdbService.GetPopularMoviesAsync();
    }
}